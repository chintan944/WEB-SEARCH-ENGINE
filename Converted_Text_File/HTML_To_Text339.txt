Ansible Lineinfile - javatpoint?HomeJavaAnsibleTableauVBAJenkinsSoftware TestingSeleniumControl SystemHTMLCSSJavaScriptjQueryQuizProjectsInterview QAnsible TutorialAnsible Tutorial Ansible Workflow Ansible Architecture Installation in Linux ad-hoc Commands Ansible Playbooks Ansible Tower Ansible Roles Ansible Variables Ansible Tags Ansible Galaxy Commands Cheat Sheets Ansible Modules Ansible Shell Ansible Templates Ansible YAML Ansible Inventory Ansible Debug Ansible Apt Ansible Lineinfile Ansible Copy Ansible Command Ansible File Ansible Vault Ansible Windows Ansible Yum Ansible AWX Ansible Unarchive Ansible Pip Ansible vs Chef Ansible vs PuppetInterview QuestionsAnsible Interviewnext ? ? prevAnsible LineinfileThe lineinfile is one of the most powerful modules in the Ansible toolbox. Ansible lineinfile module is used to insert a line, modify, remove, and replace an existing line.Ansible lineinfile module saves your time when you work with the file and modify their content on the run, such as adding a new line in the file or updating, replace a line in the file when specific text is found, and much more.Ansible lineinfile provides many parameters to do the job quickly. You can also use the condition to match the line before modifying, removing using the regular expressions. You can reuse and modify the matched line using the backreference parameter.NOTE: Ansible lineinfile can be used only for working a single line in a file. If you want to replace multiple lines, replace the module, and if you're going to insert, update, remove a block of lines in a file use blockinfile module.Insert a LineLet's see how to write a line to a file if it is not present. You can set the path of the file to be modified using the path (>Ansible 2.3)/ dest parameter. And set the line to be inserted using the line parameter.The below example will write the line "Inserting a line in a file" to the file "remote_server.txt". The new line will be added to the EOF. If the line is already existing, then it will not be combined.You can also set the create parameter, which says if the file is not present, then create a new file. The default value for the state is present.- hosts: loc
  tasks:
    - name: Ansible insert lineinfile 
      lineinfile:
        dest: /home/javaTpoint/remote_server.txt
        line: Inserting a line in a file.
        state: present
        create: yesRemoving a LineSet the state parameter to absent or remove the line specified. All the occurrence of that line will be removed.- hosts: loc
  tasks:
    - name: Ansible lineinfile remove the line
      lineinfile:
        dest: /home/javaTpoint/remote_server.txt
        line: Removed lines.
        state: absentReplacing or Modifying a LineTo modify a line, you need to use the Ansible backrefs parameter along with the regexp parameter. This should be used with state=present.If the regexp does not match any line, then the file is not changed. If the regexp matches a line or multiple lines, then the last matched line will be replaced. The grouped elements in regexp are populated and can be used for modification.In the below example, we are commenting on a line. The full line is captured line by placing them inside the parenthesis to '\1'. The '#\1' replaces the line with '#' followed by what was captured.You can have multiple captures and call them by using '\1', '\2', '\3' etc.Commenting a line with Ansible lineinfile backrefs- name: Ansible lineinfile regexp replace the example
  lineinfile:
    dest: /etc/ansible/ansible.cfg
    regexp: '(inventory = /home/fedora/inventory.ini.*)'
    line: '#\1'
    backrefs: yesUncommenting the line with lineinfile regexp- name: Ansible lineinfile backrefs example
  lineinfile:
    dest: /etc/ansible/ansible.cfg
    regexp: '#(inventory = /home/fedora/inventory.ini.*)'
    line: '\1'
    backrefs: yesNext TopicAnsible Copy? prev next ?Help Others, Please ShareLearn Latest TutorialsOpenpyxlTallyGodotSpring BootGradleUMLANNES6FlutterSelenium PyFirebaseCobolPreparationAptitudeReasoningVerbal A.InterviewCompanyTrending TechnologiesAIAWSSeleniumCloudHadoopReactJSD. ScienceAngular 7BlockchainGitMLDevOpsB.Tech / MCADBMSDSDAAOSC. NetworkCompiler D.COAD. Math.E. HackingC. GraphicsSoftware E.Web Tech.Cyber Sec.AutomataCC++Java.NetPythonProgramsControl S.Data MiningJavatpoint ServicesJavaTpoint offers too many high quality services. Mail us on hr@javatpoint.com, to get more information about given services.Website DesigningWebsite DevelopmentJava DevelopmentPHP DevelopmentWordPressGraphic DesigningLogoDigital MarketingOn Page and Off Page SEOPPCContent DevelopmentCorporate TrainingClassroom and Online TrainingData EntryTraining For College CampusJavaTpoint offers college campus training on Core Java, Advance Java, .Net, Android, Hadoop, PHP, Web Technology and Python. Please mail your requirement at hr@javatpoint.com.Duration: 1 week to 2 weekLike/Subscribe us for latest updates or newsletter Learn TutorialsLearn JavaLearn Data StructuresLearn C ProgrammingLearn C++ TutorialLearn C# TutorialLearn PHP TutorialLearn HTML TutorialLearn JavaScript TutorialLearn jQuery TutorialLearn Spring TutorialOur WebsitesJavatpoint.comHindi100.comLyricsia.comQuoteperson.comJobandplacement.comOur ServicesWebsite DevelopmentAndroid DevelopmentWebsite DesigningDigital MarketingSummer TrainingIndustrial TrainingCollege Campus TrainingContactAddress: G-13, 2nd Floor, Sec-3Noida, UP, 201301, IndiaContact No: 0120-4256464, 9990449935Contact Us Subscribe Us Privacy PolicySitemapAbout Me© Copyright 2011-2018 www.javatpoint.com. All rights reserved. Developed by JavaTpoint.